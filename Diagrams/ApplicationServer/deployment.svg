<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="766px" preserveAspectRatio="none" style="width:944px;height:766px;" version="1.1" viewBox="0 0 944 766" width="944px" zoomAndPan="magnify"><defs><filter height="300%" id="f1d325ntrlovvu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f05610748f6640c769b75bf0fa25631d]
cluster Application server--><rect fill="#FFFFFF" filter="url(#f1d325ntrlovvu)" height="645.5" style="stroke: #000000; stroke-width: 1.5;" width="849" x="81.5" y="109.5"/><path d="M235.5,110.5 L235.5,118.7969 L225.5,128.7969 L81.5,128.7969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="84.5" y="123.4951">Application server</text><!--MD5=[c57fe63ccc784df5cb2ee51a1a3f4b5c]
cluster Docker app-network--><rect fill="#FFFFFF" filter="url(#f1d325ntrlovvu)" height="100" style="stroke: #000000; stroke-width: 1.5;" width="422" x="500.5" y="136.5"/><path d="M672.5,137.5 L672.5,145.7969 L662.5,155.7969 L500.5,155.7969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="503.5" y="150.4951">Docker app-network</text><!--MD5=[c887db6dacfa107a8e600158f5b38741]
cluster certs--><polygon fill="#FFFFFF" filter="url(#f1d325ntrlovvu)" points="89.5,374,366.5,374,373.5,396.2969,376.5,396.2969,376.5,747,89.5,747,89.5,374" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="89.5" x2="373.5" y1="396.2969" y2="396.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="271" x="93.5" y="388.9951">/etc/letsencrypt/live/thomsen-it.dk</text><!--MD5=[1497e3ba29964c870bef0c5efaf493a3]
cluster logs--><polygon fill="#FFFFFF" filter="url(#f1d325ntrlovvu)" points="384.5,347,463.5,347,470.5,369.2969,922.5,369.2969,922.5,472,384.5,472,384.5,347" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="384.5" x2="470.5" y1="369.2969" y2="369.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="388.5" y="361.9951">/var/logs/</text><!--MD5=[839105dc3e351dfb5dc65ae1cd6ab753]
cluster NginxLog--><polygon fill="#FFFFFF" filter="url(#f1d325ntrlovvu)" points="392.5,374,442.5,374,449.5,396.2969,746.5,396.2969,746.5,464,392.5,464,392.5,374" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="392.5" x2="449.5" y1="396.2969" y2="396.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="396.5" y="388.9951">Nginx</text><!--MD5=[483d440daaa06dea74e2bed4c52b9f36]
cluster miniTwitLogs--><polygon fill="#FFFFFF" filter="url(#f1d325ntrlovvu)" points="766.5,374,833.5,374,840.5,396.2969,914.5,396.2969,914.5,464,766.5,464,766.5,374" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="766.5" x2="840.5" y1="396.2969" y2="396.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="770.5" y="388.9951">Minitwit</text><!--MD5=[6b28daa5982a9ec73f7c9a1bdfb977b5]
entity node_exporter--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="332,192.5,342,182.5,473,182.5,473,218.7969,463,228.7969,332,228.7969,332,192.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="463" x2="472" y1="192.5" y2="183.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="332" x2="463" y1="192.5" y2="192.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="463" x2="463" y1="192.5" y2="228.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="347" y="215.4951">node_exporter</text><!--MD5=[fb1239b090e799ef2ed2bb62c488a4ee]
entity Docker--><polygon fill="#F0F8FF" filter="url(#f1d325ntrlovvu)" points="169.5,192.5,179.5,182.5,259.5,182.5,259.5,218.7969,249.5,228.7969,169.5,228.7969,169.5,192.5" style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 1.0,3.0;"/><line style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 1.0,3.0;" x1="249.5" x2="258.5" y1="192.5" y2="183.5"/><line style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 1.0,3.0;" x1="169.5" x2="249.5" y1="192.5" y2="192.5"/><line style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 1.0,3.0;" x1="249.5" x2="249.5" y1="192.5" y2="228.7969"/><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="184.5" y="215.4951">Docker</text><!--MD5=[b7709df717efd9e6df0e9843c5de81db]
entity Nginx--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="508.5,192.5,518.5,182.5,586.5,182.5,586.5,218.7969,576.5,228.7969,508.5,228.7969,508.5,192.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="576.5" x2="585.5" y1="192.5" y2="183.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="508.5" x2="576.5" y1="192.5" y2="192.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="576.5" x2="576.5" y1="192.5" y2="228.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="523.5" y="215.4951">Nginx</text><!--MD5=[2199d8973ba8f7c016d97f3f9e657bd9]
entity fluentbit--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="818.5,192.5,828.5,182.5,914.5,182.5,914.5,218.7969,904.5,228.7969,818.5,228.7969,818.5,192.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="904.5" x2="913.5" y1="192.5" y2="183.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="818.5" x2="904.5" y1="192.5" y2="192.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="904.5" x2="904.5" y1="192.5" y2="228.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="833.5" y="215.4951">fluentbit</text><!--MD5=[7738ae4e309240ee5bb913c966e16783]
entity MiniTwit--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="643,192.5,653,182.5,738,182.5,738,218.7969,728,228.7969,643,228.7969,643,192.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="728" x2="737" y1="192.5" y2="183.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="643" x2="728" y1="192.5" y2="192.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="728" x2="728" y1="192.5" y2="228.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="658" y="215.4951">MiniTwit</text><!--MD5=[e9b947ccbaa30b6bfd3e788cec22959f]
entity cert.pem--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="150.5,420,150.5,456.2969,232.5,456.2969,232.5,430,222.5,420,150.5,420" style="stroke: #000000; stroke-width: 1.5;"/><path d="M222.5,420 L222.5,430 L232.5,430 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="160.5" y="442.9951">cert.pem</text><!--MD5=[70cc14fce1ad979eebc7b49048fde24e]
entity chain.pem--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="267.5,420,267.5,456.2969,359.5,456.2969,359.5,430,349.5,420,267.5,420" style="stroke: #000000; stroke-width: 1.5;"/><path d="M349.5,420 L349.5,430 L359.5,430 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="277.5" y="442.9951">chain.pem</text><!--MD5=[5c39bb3c6213e3bc7566008ec639ae9f]
entity fullchain.pem--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="119,703,119,739.2969,230,739.2969,230,713,220,703,119,703" style="stroke: #000000; stroke-width: 1.5;"/><path d="M220,703 L220,713 L230,713 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="129" y="725.9951">fullchain.pem</text><!--MD5=[49dc80c744c789e3e748bbe9031df764]
entity privkey.pem--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="265,703,265,739.2969,368,739.2969,368,713,358,703,265,703" style="stroke: #000000; stroke-width: 1.5;"/><path d="M358,703 L358,713 L368,713 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="275" y="725.9951">privkey.pem</text><!--MD5=[a6ecaf599cf76ba7272e7cdbbe8c132b]
entity access.log--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="609.5,420,609.5,456.2969,703.5,456.2969,703.5,430,693.5,420,609.5,420" style="stroke: #000000; stroke-width: 1.5;"/><path d="M693.5,420 L693.5,430 L703.5,430 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="619.5" y="442.9951">access.log</text><!--MD5=[eb396bf5576273887912cc2798ebfa93]
entity thomsen-it.access.log--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="401,420,401,456.2969,574,456.2969,574,430,564,420,401,420" style="stroke: #000000; stroke-width: 1.5;"/><path d="M564,420 L564,430 L574,430 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="411" y="442.9951">thomsen-it.access.log</text><!--MD5=[8f867f1490f3207f1535a570a0dca9b3]
entity minitwit.log--><polygon fill="#FEFECE" filter="url(#f1d325ntrlovvu)" points="774,420,774,456.2969,871,456.2969,871,430,861,420,774,420" style="stroke: #000000; stroke-width: 1.5;"/><path d="M861,420 L861,430 L871,430 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="784" y="442.9951">minitwit.log</text><!--MD5=[f83ae91a690dfc657e1c5fbbd818f13d]
entity a--><ellipse cx="21.5" cy="174.5" fill="#FEFECE" filter="url(#f1d325ntrlovvu)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M21.5,182.5 L21.5,209.5 M8.5,190.5 L34.5,190.5 M21.5,209.5 L8.5,224.5 M21.5,209.5 L34.5,224.5 " fill="none" filter="url(#f1d325ntrlovvu)" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="6" y="242.9951">alice</text><!--MD5=[f22868d95b2ddc1b3d5fa39279155bfe]
link a to Docker--><path d="M37.294,205.5 C64.7179,205.5 122.2358,205.5 164.3312,205.5 " fill="none" id="a-&gt;Docker" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="169.3852,205.5,160.3852,201.5,164.3852,205.5,160.3852,209.5,169.3852,205.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="55.25" y="198.5669">:443 and :9100</text><!--MD5=[63c91d84c81b1a4a2a11c7d312d6534b]
link Docker to Nginx--><path d="M230.9163,182.3537 C248.5821,159.6488 278.9758,126.4657 314.5,112.5 C353.7947,97.052 468.927,89.7563 504.5,112.5 C526.5605,126.6045 537.4683,155.2367 542.7553,177.0266 " fill="none" id="Docker-&gt;Nginx" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="543.9213,182.1242,545.8136,172.4588,542.8063,177.2501,538.015,174.2428,543.9213,182.1242" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="369.5" y="97.5669">:443</text><!--MD5=[e9cb91a96227b8016451fb25b43649f7]
link Docker to node_exporter--><path d="M259.5307,205.5 C279.6279,205.5 303.8685,205.5 326.6341,205.5 " fill="none" id="Docker-&gt;node_exporter" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="331.7716,205.5,322.7716,201.5,326.7716,205.5,322.7716,209.5,331.7716,205.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="277.75" y="198.5669">:9100</text><!--MD5=[8578e2f289a9671db1a18744231793a0]
link Nginx to MiniTwit--><path d="M586.5754,205.5 C602.3132,205.5 620.71,205.5 637.6147,205.5 " fill="none" id="Nginx-&gt;MiniTwit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="642.8085,205.5,633.8085,201.5,637.8085,205.5,633.8085,209.5,642.8085,205.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="604.75" y="198.5669">:80</text><!--MD5=[bdabe9ae1c769edb673b13ac530a379f]
link MiniTwit to fluentbit--><path d="M738.1281,205.5 C761.3185,205.5 789.2846,205.5 813.1863,205.5 " fill="none" id="MiniTwit-&gt;fluentbit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="818.2217,205.5,809.2217,201.5,813.2217,205.5,809.2217,209.5,818.2217,205.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="756.25" y="198.5669">:24224</text><!--MD5=[850c64b5070e1d67eb31d425a23eb88b]
link Nginx to fluentbit--><path d="M559.2889,182.0871 C572.1143,159.5177 594.9441,126.7527 625.5,112.5 C677.8617,88.0761 701.1993,92.759 755.5,112.5 C791.4602,125.5734 823.8953,155.9726 844.2867,178.4761 " fill="none" id="Nginx-&gt;fluentbit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="847.7031,182.2975,844.6866,172.922,844.3706,178.57,838.7226,178.254,847.7031,182.2975" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="680.5" y="97.5669">:24224</text><!--MD5=[8790aaa3fae4911918898930f1906cf6]
link Nginx to certs--><path d="M526.8643,228.8127 C520.2575,235.1444 512.5523,241.4892 504.5,246 C355.4095,329.5187 250.0028,221.9782 133.5,347 C126.8027,354.1871 122.275,363.1159 119.2633,372.5482 C119.1692,372.843 119.0766,373.1383 118.9854,373.434 C118.9398,373.5818 118.8946,373.7298 118.8497,373.8779 " fill="none" id="Nginx-certs" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[79981517fe40faf27184b199be3966d0]
link Nginx to NginxLog--><path d="M586.8652,226.3558 C627.3945,249.9978 689.0679,292.4464 721.5,347 C723.9639,351.1445 726.0838,355.5673 727.9064,360.1463 C728.8178,362.4358 729.6548,364.7644 730.4234,367.1167 C730.8076,368.2928 731.1748,369.4749 731.5256,370.6611 C731.701,371.2542 731.8723,371.8482 732.0396,372.4431 C732.1232,372.7405 732.2059,373.0381 732.2875,373.3359 C732.3284,373.4848 732.3689,390.1479 732.4093,390.2969 " fill="none" id="Nginx-NginxLog" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ca84c626e7c93baef87b9ebeb0c95586]
link MiniTwit to miniTwitLogs--><path d="M738.1232,226.5186 C784.1031,249.3749 851.9758,290.3662 888.5,347 C893.7371,355.1206 897.508,380.7967 900.2125,390.2969 " fill="none" id="MiniTwit-miniTwitLogs" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9a29890e3092dcbc236853a04025f221]
link cert.pem to chain.pem--><!--MD5=[9506ed45e39e97877bbf11726f0c953d]
link cert.pem to fullchain.pem--><!--MD5=[18c95a4aa247a5dbe1a2496c93f0505d]
link fullchain.pem to privkey.pem--><!--MD5=[de03569b41aaa3583370c7f3854f38b3]
@startuml deployment
actor alice as a
frame "Application server" {

  node node_exporter

  node Docker #aliceblue;line:blue;line.dotted;text:blue

  frame "Docker app-network" {
    node Nginx
    node fluentbit 
    node MiniTwit
  }

  folder "/etc/letsencrypt/live/thomsen-it.dk" as certs {
    file "cert.pem"
    file "chain.pem"
    file "fullchain.pem"
    file "privkey.pem"
  }

  folder "/var/logs/" as logs {
    folder "Nginx" as NginxLog {
      file "access.log"
      file "thomsen-it.access.log"
    }
    folder "Minitwit" as miniTwitLogs {
      file "minitwit.log" 
    }
  }

a -> Docker : ":443 and :9100"

Docker-> Nginx : ":443"
Docker-> node_exporter : ":9100"
Nginx -> MiniTwit: ":80"

MiniTwit -> fluentbit: ":24224"
Nginx -> fluentbit: ":24224"

Nginx - - certs
Nginx - - NginxLog
MiniTwit - - miniTwitLogs
}
@enduml

PlantUML version 1.2020.06(Sun Apr 05 12:38:32 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14-ea+33
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>